(function(t){function e(e){for(var n,s,i=e[0],l=e[1],c=e[2],p=0,m=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"184f":function(t,e,a){},"3e99":function(t,e,a){"use strict";a("f4cb")},5129:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],s=(a("034f"),a("2877")),i={},l=Object(s["a"])(i,r,o,!1,null,null,null),c=l.exports,u=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[t._m(0),a("div",{staticClass:"right"},[a("div",{staticClass:"absolute-center light-shadow",attrs:{id:"form-container"}},[a("h1",{staticClass:"title text-centered"},[t._v("Logare")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.emailAddress,expression:"emailAddress"}],class:{dangerInput:t.credentialsError.email},attrs:{type:"text",placeholder:"adresa mail"},domProps:{value:t.emailAddress},on:{focus:t.clearEmail,input:function(e){e.target.composing||(t.emailAddress=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],class:{dangerInput:t.credentialsError.password},attrs:{type:"password",placeholder:"parola"},domProps:{value:t.password},on:{focus:t.clearPassword,input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.credentialsError.password?a("p",{staticClass:"danger-p"},[t._v("Parola introdusa este gresita!")]):t._e(),t.credentialsError.email?a("p",{staticClass:"danger-p"},[t._v("Adresa de mail introdusa este gresita!")]):t._e(),a("button",{staticClass:"small-btn small-btn-centered",on:{click:t.login}},[t._v("logare")])]),a("p",{attrs:{id:"bottom-footer"}},[t._v("Built by MRVIT SRL 2020.")])])])},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("div",{staticClass:"overlay"})])}],d=(a("96cf"),a("1da1")),f={data:function(){return{emailAddress:"",password:"",isLoading:!1,credentialsError:{email:!1,password:!1}}},methods:{login:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$vs.loading({background:"#5b3cc4",color:"#fff"}),e.next=3,axios.post("https://vote-application-mrvit.herokuapp.com/auth/login",{email:t.emailAddress,password:t.password});case 3:n=e.sent,console.log(n.data),a.close(),n.data.success?(localStorage.setItem("firstName",n.data.adminInfo.firstName),localStorage.setItem("lastName",n.data.adminInfo.lastName),localStorage.setItem("tradeUnion",n.data.adminInfo.tradeUnion),localStorage.setItem("adminId",n.data.adminInfo.id),t.$router.push("/dashboard")):(n.data.incorrectUsername&&(t.credentialsError.email=!0,console.log("incorrect email")),n.data.incorrectPassword&&(t.credentialsError.password=!0,console.log("incorrect password")));case 7:case"end":return e.stop()}}),e)})))()},clearEmail:function(){this.credentialsError.email=!1},clearPassword:function(){this.credentialsError.password=!1}}},v=f,h=(a("e410"),Object(s["a"])(v,p,m,!1,null,"363917c2",null)),b=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("side-navigation"),a("div",{staticClass:"content"},[a("navigation"),a("router-view")],1)],1)},w=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("ul",{attrs:{id:"actions"}},[a("li",[a("unicon",{staticClass:"icon",attrs:{name:"signout"}})],1),a("li",[a("unicon",{staticClass:"icon",attrs:{name:"setting"}})],1)]),a("vs-avatar",{attrs:{dark:"",id:"avatar"},scopedSlots:t._u([{key:"text",fn:function(){return[t._v(" "+t._s(t.admin.firstName+" "+t.admin.lastName)+" ")]},proxy:!0}])})],1)},_=[],I={data:function(){return{admin:{firstName:localStorage.getItem("firstName"),lastName:localStorage.getItem("lastName")}}}},O=I,k=(a("68c4"),Object(s["a"])(O,x,_,!1,null,"c44735fa",null)),C=k.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"side-bar"}},[a("h1",{staticClass:"title text-centered"},[t._v("Sindicatul National Solidaritatea")]),a("ul",{attrs:{id:"side-nav-list"}},[a("router-link",{staticClass:"side-li",attrs:{tag:"li",to:{name:"dash-home"}}},[a("unicon",{staticClass:"icon",attrs:{name:"home-alt"}}),a("p",[t._v("Acasa")])],1),a("router-link",{staticClass:"side-li",attrs:{tag:"li",to:{name:"add-member"}}},[a("unicon",{staticClass:"icon",attrs:{name:"plus"}}),a("p",[t._v("Adauga Membru")])],1),a("router-link",{staticClass:"side-li",attrs:{tag:"li",to:{name:"dash-members"}}},[a("unicon",{staticClass:"icon",attrs:{name:"users-alt"}}),a("p",[t._v("Membrii Sindicat")])],1),a("router-link",{staticClass:"side-li",attrs:{tag:"li",to:{name:"dash-create-poll"}}},[a("unicon",{staticClass:"icon",attrs:{name:"thumbs-down"}}),a("p",[t._v("Creaza Poll")])],1),a("router-link",{staticClass:"side-li",attrs:{tag:"li",to:{name:"polls-list"}}},[a("unicon",{staticClass:"icon",attrs:{name:"archive-alt"}}),a("p",[t._v("Poll-uri")])],1)],1)])},N=[],P={},j=P,$=(a("f431"),Object(s["a"])(j,y,N,!1,null,"761732d5",null)),R=$.exports,D={components:{Navigation:C,"side-navigation":R},data:function(){return{active:"home"}}},S=D,A=(a("625a"),Object(s["a"])(S,g,w,!1,null,"bd623cbe",null)),E=A.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[a("vs-checkbox",{attrs:{indeterminate:t.selected.length==t.members.length},on:{change:function(e){t.selected=t.$vs.checkAll(t.selected,t.members)}},model:{value:t.allCheck,callback:function(e){t.allCheck=e},expression:"allCheck"}})],1),a("vs-th",[t._v(" Prenume ")]),a("vs-th",[t._v(" Nume ")]),a("vs-th",[t._v(" Email ")]),a("vs-th",[t._v(" DGRFP ")]),a("vs-th",[t._v(" CNP ")]),a("vs-th",[t._v(" Adresa ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.members,(function(e,n){return a("vs-tr",{key:n,attrs:{data:e,"is-selected":!!t.selected.includes(e)}},[a("vs-td",{attrs:{checkbox:""}},[a("vs-checkbox",{attrs:{val:e},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),a("vs-td",[t._v(" "+t._s(e.firstName)+" ")]),a("vs-td",[t._v(" "+t._s(e.lastName)+" ")]),a("vs-td",[t._v(" "+t._s(e.email)+" ")]),a("vs-td",[t._v(" "+t._s(e.DGRFP)+" ")]),a("vs-td",[t._v(" "+t._s(e.CNP)+" ")]),a("vs-td",[t._v(" "+t._s(e.address)+" ")]),a("vs-td",[a("button",{attrs:{id:"delete-btn"},on:{click:function(){t.deleteMember(e._id)}}},[t._v("stergeti")])])],1)}))},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},F=[],V={data:function(){return{allCheck:!1,selected:[],members:[{}]}},mounted:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getMembers();case 2:case"end":return e.stop()}}),e)})))()},methods:{getMembers:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$vs.loading({background:"#5b3cc4",color:"#fff"}),t.members=[],n=localStorage.adminId,e.next=5,axios.get("https://vote-application-mrvit.herokuapp.com/members/".concat(n));case 5:for(r=e.sent,o=0;o<r.data.members.length;o++)t.members.push(r.data.members[o]);a.close();case 8:case"end":return e.stop()}}),e)})))()},deleteMember:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,axios.delete("https://vote-application-mrvit.herokuapp.com/members/".concat(t));case 2:n=a.sent,n.data.success?e.$vs.notification({progress:"auto",color:"success",position:"top-right",title:"Membru Sters",text:"Membrul a fost sters cu success din baza de date!"}):e.$vs.notification({progress:"auto",color:"danger",position:"top-right",title:"Eroare",text:"Stergerea membrului a esuat. Incercati mai tarziu."}),e.getMembers();case 5:case"end":return a.stop()}}),a)})))()}}},q=V,G=(a("7947"),Object(s["a"])(q,M,F,!1,null,"16a00da5",null)),z=G.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{attrs:{id:"left"}},[a("h1",{staticClass:"title"},[t._v("Informatii Poll")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pollInfo.title,expression:"pollInfo.title"}],attrs:{type:"text",placeholder:"titlu"},domProps:{value:t.pollInfo.title},on:{input:function(e){e.target.composing||t.$set(t.pollInfo,"title",e.target.value)}}}),a("div",{attrs:{id:"checkbox-container"}},[a("vs-checkbox",{staticClass:"m-checkbox",on:{click:function(e){t.pollInfo.isGeneralQuestion=!1}},model:{value:t.pollInfo.yesOrNo,callback:function(e){t.$set(t.pollInfo,"yesOrNo",e)},expression:"pollInfo.yesOrNo"}},[t._v(" Da & Nu ")]),a("vs-checkbox",{staticClass:"m-checkbox",on:{click:function(e){t.pollInfo.yesOrNo=!1}},model:{value:t.pollInfo.isGeneralQuestion,callback:function(e){t.$set(t.pollInfo,"isGeneralQuestion",e)},expression:"pollInfo.isGeneralQuestion"}},[t._v(" Raspuns Multiplu ")])],1),t.pollInfo.yesOrNo?a("div",{attrs:{id:"yesOrNo"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pollInfo.question,expression:"pollInfo.question"}],attrs:{type:"text",placeholder:"introduceti intrebarea"},domProps:{value:t.pollInfo.question},on:{input:function(e){e.target.composing||t.$set(t.pollInfo,"question",e.target.value)}}}),a("button",{staticClass:"m-btn small-btn",on:{click:t.createPoll}},[t._v("creati poll")])]):t._e(),t.pollInfo.isGeneralQuestion?a("div",{attrs:{id:"generalQuestion"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pollInfo.question,expression:"pollInfo.question"}],attrs:{type:"text",placeholder:"introduceti intrebarea"},domProps:{value:t.pollInfo.question},on:{input:function(e){e.target.composing||t.$set(t.pollInfo,"question",e.target.value)}}}),a("div",{staticClass:"group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pollInfo.answerOption,expression:"pollInfo.answerOption"}],class:{dangerInput:t.wrongInputValues.answerOption},attrs:{type:"text",placeholder:"adauga varianta / candidat"},domProps:{value:t.pollInfo.answerOption},on:{input:function(e){e.target.composing||t.$set(t.pollInfo,"answerOption",e.target.value)}}})]),a("div",{staticClass:"group"},[a("button",{staticClass:"m-btn rounded-btn",on:{click:t.addAnswerOption}},[t._v(" Adauga ")])]),a("div",{staticClass:"clearfix"}),a("button",{staticClass:"m-btn small-btn",on:{click:t.createPoll}},[t._v("creati poll")])]):t._e()]),a("div",{attrs:{id:"right"}},[a("h1",{staticClass:"title"},[t._v("Vizionare Poll")]),a("div",{attrs:{id:"preview"}},[a("h1",{staticClass:"small-title"},[t._v(t._s(t.pollInfo.title))]),a("p",{staticClass:"question-p"},[t._v(t._s(t.pollInfo.question))]),t.pollInfo.isGeneralQuestion?a("div",{attrs:{id:"checkbox-preview-container"}},[t._l(t.multipleAnswersOptions,(function(e){return a("vs-checkbox",{key:e,staticClass:"m-checkbox"},[t._v(" "+t._s(e)+" ")])})),t.multipleAnswersOptions.length?a("button",{staticClass:"m-btn small-btn small-btn-centered",staticStyle:{float:"left"}},[t._v("voteaza")]):t._e()],2):t._e(),t.pollInfo.yesOrNo?a("div",{attrs:{id:"yesOrNoContainer"}},[a("button",{staticClass:"m-btn small-btn"},[t._v("DA")]),a("button",{staticClass:"m-btn small-btn"},[t._v("nu")])]):t._e()])])])},U=[],L=a("5530"),T=(a("4d90"),function(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return t=+e+"/"+a+"/"+n,t}),B={currentDateFormat:T},J={data:function(){return{pollInfo:{title:"",yesOrNo:!1,isGeneralQuestion:!1,question:"",answerOption:""},multipleAnswersOptions:[],wrongInputValues:{answerOption:!1,title:!1,generalQuestion:!1}}},methods:{addAnswerOption:function(){""!=this.pollInfo.answerOption?this.multipleAnswersOptions.push(this.pollInfo.answerOption):this.wrongInputValues.answerOption=!0,this.pollInfo.answerOption=""},clearInputs:function(){this.wrongInputValues.answerOption=!1,this.wrongInputValues.generalQuestion=!1,this.wrongInputValues.title=!1},clearFields:function(){this.pollInfo.title="",this.pollInfo.question="",this.multipleAnswersOptions=[],this.pollInfo.yesOrNo=!1,this.pollInfo.isGeneralQuestion=!1},createPoll:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.pollInfo.yesOrNo?{title:t.pollInfo.title,adminId:localStorage.getItem("adminId"),question:t.pollInfo.question,yesOrNoAnswers:[],options:[],optionAnswers:[],closed:!1,date:B.currentDateFormat()}:{title:t.pollInfo.title,question:t.pollInfo.question,adminId:localStorage.getItem("adminId"),yesOrNoAnswers:[],options:t.multipleAnswersOptions,optionAnswers:[],closed:!1,date:B.currentDateFormat()},a.adminId=localStorage.adminId,e.next=4,axios.post("https://vote-application-mrvit.herokuapp.com/polls",Object(L["a"])({},a));case 4:n=e.sent,n.data.success&&(t.$vs.notification({progress:"auto",color:"success",position:"top-right",title:"Poll Creat",text:"Poll-ul a fost creat cu succes!"}),t.sendMail(n.data.poll._id),t.clearFields());case 6:case"end":return e.stop()}}),e)})))()},sendMail:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post("https://vote-application-mrvit.herokuapp.com/mailgun/send_mail",{tradeUnion:localStorage.tradeUnion,pollId:t});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},Y=J,W=(a("b061"),Object(s["a"])(Y,Q,U,!1,null,"6bdda828",null)),H=W.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"content"}},[a("div",{attrs:{id:"cards-container"}},[a("div",{staticClass:"card light-shadow"},[a("p",{staticClass:"count"},[a("span",[t._v(t._s(t.memberCount))]),t._v(" membrii")])]),a("div",{staticClass:"card light-shadow"},[a("p",{staticClass:"count"},[a("span",[t._v(t._s(t.pollCount))]),t._v(" polluri")])]),a("div",{staticClass:"clearfix"})]),a("div",{staticClass:"light-shadow",attrs:{id:"chart-container"}},[a("multiple-bar-chart")],1)])},X=[],Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("apexchart",{attrs:{type:"bar",options:t.options,series:t.series}})},tt=[],et=(a("99af"),a("4160"),a("159b"),{data:function(){return{series:[{name:"DA",data:[0,0,0,0,0]},{name:"NU",data:[0,0,0,0,0]},{name:"Abtineri",data:[0,0,0,0,0]}],options:{colors:["var(--primary)","var(--danger)","#ffba00"],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"25%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[]},fill:{opacity:1}}}},mounted:function(){this.getPolls()},methods:{getPolls:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],n=[],r=localStorage.adminId,e.next=5,axios.get("https://vote-application-mrvit.herokuapp.com/polls/".concat(r));case 5:for(o=e.sent,o.data.success&&o.data.polls.forEach((function(t){0==t.options.length&&a.push(t)})),s=0;s<a.length;s++)for(n.push(a[s].title),i=0;i<a[s].yesOrNoAnswers.length;i++)a[s].yesOrNoAnswers[i].vote>0?(console.log("vote is > 0"),t.series[0].data[s]++):(console.log("vote is < 0"),t.series[1].data[s]++);t.options=Object(L["a"])(Object(L["a"])({},t.options),{},{xaxis:{categories:[].concat(n)}});case 9:case"end":return e.stop()}}),e)})))()}}}),at=et,nt=Object(s["a"])(at,Z,tt,!1,null,"374b9153",null),rt=nt.exports,ot={components:{MultipleBarChart:rt},data:function(){return{memberCount:0,pollCount:0}},mounted:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.geMebersCount();case 2:return e.next=4,t.getPollsCount();case 4:case"end":return e.stop()}}),e)})))()},methods:{geMebersCount:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=localStorage.adminId,e.next=3,axios.get("https://vote-application-mrvit.herokuapp.com/members/count/".concat(a));case 3:n=e.sent,n.data.success&&(t.memberCount=n.data.count);case 5:case"end":return e.stop()}}),e)})))()},getPollsCount:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=localStorage.adminId,e.next=3,axios.get("https://vote-application-mrvit.herokuapp.com/polls/count/".concat(a));case 3:n=e.sent,n.data.success&&(t.pollCount=n.data.count);case 5:case"end":return e.stop()}}),e)})))()}}},st=ot,it=(a("fbda"),Object(s["a"])(st,K,X,!1,null,"76e90682",null)),lt=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("h1",{staticClass:"title text-centered small"},[t._v("Bine ati venit!")]),a("h1",{staticClass:"title text-centered"},[t._v(t._s(t.pollData.title))]),a("div",{attrs:{id:"content"}},[a("p",{staticClass:"text-centered"},[t._v(t._s(t.pollData.question))]),t.pollData.options.length?a("div",{attrs:{id:"checkbox-container"}},[t._l(t.pollData.options,(function(e,n){return a("vs-checkbox",{key:e,staticClass:"m-checkbox",on:{click:function(){t.chooseOption(n)}}},[t._v(t._s(e))])})),a("div",{staticClass:"clearfix"}),a("button",{staticClass:"m-btn small-btn small-btn-centerd",on:{click:t.placeOption}},[t._v("voteaza")])],2):a("div",[a("button",{staticClass:"m-btn small-btn",on:{click:function(){t.placeVote(1)}}},[t._v("DA")]),a("button",{staticClass:"m-btn small-btn",on:{click:function(){t.placeVote(-1)}}},[t._v("NU")])]),a("span",{staticClass:"clearfix"})])])},ut=[],pt={data:function(){return{pollData:{options:[]},memberData:{},optionAnswer:-1}},mounted:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPollData();case 2:return e.next=4,t.getMemberData();case 4:t.checkForVote();case 5:case"end":return e.stop()}}),e)})))()},methods:{checkForVote:function(){var t=!0;if(this.pollData.options.length)for(var e=0;e<this.pollData.optionAnswers.length;e++)this.pollData.optionAnswers[e].memberId==this.$route.params.memberId&&(t=!1);else for(var a=0;a<this.pollData.yesOrNoAnswers.length;a++)this.pollData.yesOrNoAnswers[a].memberId==this.$route.params.memberId&&(t=!1);t||this.$router.push({name:"vote-error"})},getPollData:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.pollId,e.next=3,axios.get("https://vote-application-mrvit.herokuapp.com/polls/poll/".concat(a));case 3:n=e.sent,n.data.success?t.pollData=n.data.poll:alert("pollul la care incercati sa participati nu exista sau a fost inchis.");case 5:case"end":return e.stop()}}),e)})))()},getMemberData:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$vs.loading({background:"#5b3cc4",color:"#fff"}),n=t.$route.params.memberId,e.next=4,axios.get("https://vote-application-mrvit.herokuapp.com/members/member/".concat(n));case 4:r=e.sent,r.data.success?t.memberData=r.data.member:alert("Votul dumneavoastra a fost inregistrat deja."),a.close();case 7:case"end":return e.stop()}}),e)})))()},placeVote:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.$route.params.pollId,r=e.$route.params.memberId,e.pollData.options.length){a.next=7;break}return a.next=5,axios.post("https://vote-application-mrvit.herokuapp.com/polls/vote/".concat(n,"/yesorno"),{memberId:r,vote:t});case 5:o=a.sent,o.data.success?e.$router.push({name:"vote-placed"}):alert("Something went wrong");case 7:case"end":return a.stop()}}),a)})))()},chooseOption:function(t){this.optionAnswer=t},placeOption:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.pollId,n=t.$route.params.memberId,r=t.optionAnswer,e.next=5,axios.post("https://vote-application-mrvit.herokuapp.com/polls/vote/".concat(a,"/multiple"),{memberId:n,vote:r});case 5:o=e.sent,console.log(o.data);case 7:case"end":return e.stop()}}),e)})))()}}},mt=pt,dt=(a("f44b"),Object(s["a"])(mt,ct,ut,!1,null,"af932a90",null)),ft=dt.exports,vt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{attrs:{id:"center"}},[a("h1",{staticClass:"title text-centered"},[t._v(" Multumim pentru votul dumneavoastra! ")]),a("p",{staticClass:"text-centered"},[t._v("In cazul intampinarilor unor probleme tehnice va rugam sa ne contactati la support-vot@mrv-it.com")])])])}],bt={},gt=bt,wt=(a("9e3c"),Object(s["a"])(gt,vt,ht,!1,null,"165a00be",null)),xt=wt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"content"}},[a("vs-table",{attrs:{striped:""},scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[t._v(" Titlu ")]),a("vs-th",[t._v(" Data ")]),a("vs-th",[t._v(" Status ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.polls,(function(e,n){return a("vs-tr",{key:n,attrs:{data:e},scopedSlots:t._u([{key:"expand",fn:function(){return[e.options.length>0?a("bar-chart",{attrs:{pollData:e}}):a("donut-chart",{attrs:{pollData:e}}),a("button",{staticClass:"m-btn rounded-btn",attrs:{id:"delete"}},[t._v("inchide")])]},proxy:!0}],null,!0)},[a("vs-td",[t._v(" "+t._s(e.title)+" ")]),a("vs-td",[t._v(" "+t._s(e.date)+" ")]),a("vs-td",[e.closed?a("p",{staticClass:"danger-color"},[t._v("Inchisa")]):a("p",{staticClass:"success-color"},[t._v("Deschis")])])],1)}))},proxy:!0}])})],1)},It=[],Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("apexchart",{attrs:{width:"380",type:"donut",options:t.options,series:t.series}})},kt=[],Ct={props:["pollData"],data:function(){return{totlaVotes:0,options:{colors:["var(--primary)","var(--danger)"],plotOptions:{pie:{donut:{labels:{show:!0,total:{showAlways:!0,show:!0}}}}},labels:["DA","NU"]},series:[]}},mounted:function(){this.getSeries()},methods:{getSeries:function(){for(var t=0,e=0,a=this.pollData.yesOrNoAnswers,n=0;n<a.length;n++)a[n].vote<0?e++:t++;this.series.push(t),this.series.push(e)}}},yt=Ct,Nt=Object(s["a"])(yt,Ot,kt,!1,null,null,null),Pt=Nt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("apexchart",{attrs:{width:"500",type:"bar",options:t.options,series:t.series}})},$t=[],Rt={props:["pollData"],data:function(){return{series:[],options:{colors:["var(--primary)"],chart:{height:350,type:"bar"},plotOptions:{bar:{dataLabels:{position:"bottom"}}},dataLabels:{enabled:!0,formatter:function(t){return t+" voturi"},offsetY:20,style:{fontSize:"12px",colors:["white"]}},xaxis:{categories:[]},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1,formatter:function(t){return 100*t/1+"%"}}}}}},mounted:function(){this.updateOptions(),this.getSeries()},methods:{updateOptions:function(){for(var t=this.pollData.options,e=[],a=0;a<t.length;a++)e.push(t[a]);var n=this;this.options=Object(L["a"])(Object(L["a"])({},this.options),{xaxis:{categories:[].concat(e)},yaxis:{labels:{show:!1,formatter:function(t){return 100*t/n.pollData.optionAnswers.length+"%"}}}})},getSeries:function(){for(var t=this.options.xaxis.categories.length,e=[],a=this.pollData.optionAnswers,n=0;n<t;n++)e.push(0);for(var r=0;r<a.length;r++)e[a[r].voteOption]++;this.series.push({name:"Voturi",data:e})}}},Dt=Rt,St=Object(s["a"])(Dt,jt,$t,!1,null,"31743e91",null),At=St.exports,Et={components:{DonutChart:Pt,BarChart:At},data:function(){return{allCheck:!1,polls:[{options:[]}]}},mounted:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPolls();case 2:case"end":return e.stop()}}),e)})))()},methods:{getPolls:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$vs.loading({background:"#5b3cc4",color:"#fff"}),n=localStorage.adminId,e.next=4,axios.get("https://vote-application-mrvit.herokuapp.com/polls/".concat(n));case 4:if(r=e.sent,t.polls=[],r.data.success)for(o=0;o<r.data.polls.length;o++)t.polls.push(r.data.polls[o]);a.close();case 8:case"end":return e.stop()}}),e)})))()}}},Mt=Et,Ft=(a("5abc"),Object(s["a"])(Mt,_t,It,!1,null,"32371073",null)),Vt=Ft.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"centered"}},[a("h1",{staticClass:"title"},[t._v("Adaugati Membru")]),a("form",{attrs:{action:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberInfo.firstName,expression:"memberInfo.firstName"}],attrs:{type:"text",placeholder:"prenume"},domProps:{value:t.memberInfo.firstName},on:{input:function(e){e.target.composing||t.$set(t.memberInfo,"firstName",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberInfo.lastName,expression:"memberInfo.lastName"}],attrs:{type:"text",placeholder:"nume"},domProps:{value:t.memberInfo.lastName},on:{input:function(e){e.target.composing||t.$set(t.memberInfo,"lastName",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberInfo.CNP,expression:"memberInfo.CNP"}],attrs:{type:"text",placeholder:"CNP"},domProps:{value:t.memberInfo.CNP},on:{input:function(e){e.target.composing||t.$set(t.memberInfo,"CNP",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberInfo.address,expression:"memberInfo.address"}],attrs:{type:"text",placeholder:"adresa"},domProps:{value:t.memberInfo.address},on:{input:function(e){e.target.composing||t.$set(t.memberInfo,"address",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberInfo.email,expression:"memberInfo.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:t.memberInfo.email},on:{input:function(e){e.target.composing||t.$set(t.memberInfo,"email",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberInfo.DGRFP,expression:"memberInfo.DGRFP"}],attrs:{type:"text",placeholder:"DGRFP"},domProps:{value:t.memberInfo.DGRFP},on:{input:function(e){e.target.composing||t.$set(t.memberInfo,"DGRFP",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberInfo.joinedIn,expression:"memberInfo.joinedIn"}],attrs:{type:"text",placeholder:"data adeziunii"},domProps:{value:t.memberInfo.joinedIn},on:{input:function(e){e.target.composing||t.$set(t.memberInfo,"joinedIn",e.target.value)}}}),a("button",{staticClass:"m-btn small-btn",attrs:{type:"submit"},on:{click:function(e){t.addMember(e)}}},[t._v("adauga membru")])])])},Gt=[],zt=function(t,e,a){a.notification({progress:"auto",color:"success",position:"top-right",title:t,text:e})},Qt=function(t,e,a){a.notification({progress:"auto",color:"danger",position:"top-right",title:t,text:e})},Ut={notifyFail:Qt,notifySuccess:zt},Lt={data:function(){return{memberInfo:{firstName:"",lastName:"",CNP:"",adress:"",email:"",DGRFP:"",joinedIn:"",adminId:""}}},methods:{clearInputs:function(){this.memberInfo={firstName:"",lastName:"",CNP:"",adress:"",email:"",DGRFP:"",joinedIn:""}},addMember:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.preventDefault(),e.memberInfo.adminId=localStorage.adminId,console.log(e.memberInfo),a.next=5,axios.post("https://vote-application-mrvit.herokuapp.com/members",Object(L["a"])({},e.memberInfo));case 5:n=a.sent,n.data.success?(Ut.notifySuccess("Membru adaugat!","Membrul a fost adaugat cu succes in baza de date!",e.$vs),e.addMemberToMailingList(n.data.member)):Ut.notifyFail("Eroare","Verificat daca membrun nu exista deja in baza de date!",e.$vs),e.clearInputs();case 8:case"end":return a.stop()}}),a)})))()},addMemberToMailingList:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post("https://vote-application-mrvit.herokuapp.com/mailgun/add_member/members",{member:Object(L["a"])({},t),tradeUnion:localStorage.tradeUnion.toLowerCase()});case 2:a=e.sent,a.data.success||Ut.notifyFail("Posibila problema!","Membrul adaugat nu a fost adaugat in mailing list!");case 4:case"end":return e.stop()}}),e)})))()}}},Tt=Lt,Bt=(a("3e99"),Object(s["a"])(Tt,qt,Gt,!1,null,"539b0d34",null)),Jt=Bt.exports,Yt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{attrs:{id:"center"}},[a("h1",{staticClass:"title text-centered"},[t._v(" Votul dumneavoastra a fost deja depus! ")]),a("p",{staticClass:"text-centered"},[t._v("In cazul in care nu dumneavoastra ati depus votul va rugam sa ne contactati aici "),a("span",{staticStyle:{color:"var(--primary)"}},[t._v("support@mrv-it.com")])])])])}],Ht={},Kt=Ht,Xt=(a("57a8"),Object(s["a"])(Kt,Yt,Wt,!1,null,"72a1eed4",null)),Zt=Xt.exports;n["default"].use(u["a"]);var te=[{path:"/",name:"login",component:b},{path:"/vote/:pollId/:memberId",name:"vote",component:ft},{path:"/vote/finish",name:"vote-placed",component:xt},{path:"/vote/error",name:"vote-error",component:Zt},{path:"/dashboard",component:E,children:[{path:"",name:"dash-home",component:lt},{path:"members",name:"dash-members",component:z},{path:"add_member",name:"add-member",component:Jt},{path:"create_poll",name:"dash-create-poll",component:H},{path:"polls",name:"polls-list",component:Vt}]}],ee=new u["a"]({mode:"history",base:"/",routes:te}),ae=ee,ne=a("2f62");n["default"].use(ne["a"]);var re=new ne["a"].Store({state:{},mutations:{},actions:{},modules:{}});a("e443"),a("94ac"),a("9416"),a("9148"),n["default"].config.productionTip=!1,new n["default"]({router:ae,store:re,render:function(t){return t(c)}}).$mount("#app")},"57a8":function(t,e,a){"use strict";a("6fa5")},"5abc":function(t,e,a){"use strict";a("eaee")},"625a":function(t,e,a){"use strict";a("71a7")},"68c4":function(t,e,a){"use strict";a("184f")},"6fa5":function(t,e,a){},"71a7":function(t,e,a){},7947:function(t,e,a){"use strict";a("a4b1")},"7bd7":function(t,e,a){},"85ec":function(t,e,a){},9148:function(t,e,a){"use strict";a.r(e);var n=a("1321"),r=a.n(n),o=a("2b0e");o["default"].use(r.a),o["default"].component("apexchart",r.a)},9416:function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),r=a("574d"),o=a.n(r);a("04f2"),a("a2d9");n["default"].use(o.a,{colors:{primary:"#6610f2",dark:"#222b45"}})},"94ac":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),r=a("a2e0"),o=a.n(r),s=a("cf18");o.a.add([s["f"],s["e"],s["c"],s["g"],s["h"],s["b"],s["a"],s["d"]]),n["default"].use(o.a,{height:25,width:25})},"9e3c":function(t,e,a){"use strict";a("e6e3")},a2d9:function(t,e,a){},a4b1:function(t,e,a){},b061:function(t,e,a){"use strict";a("7bd7")},d168:function(t,e,a){},d2ba:function(t,e,a){},e410:function(t,e,a){"use strict";a("5129")},e443:function(t,e,a){"use strict";a.r(e);a("d3b7");var n=a("bc3a"),r=a.n(n);window.axios=a("bc3a"),r.a.defaults.withCredentials=!0,r.a.interceptors.response.use((function(t){return t}),(function(t){if(401==t.response.status)return window.location="/",Promise.resolve("User is not authorized")}))},e6e3:function(t,e,a){},eaee:function(t,e,a){},f431:function(t,e,a){"use strict";a("d168")},f44b:function(t,e,a){"use strict";a("f484")},f484:function(t,e,a){},f4cb:function(t,e,a){},fbda:function(t,e,a){"use strict";a("d2ba")}});
//# sourceMappingURL=app.44081927.js.map